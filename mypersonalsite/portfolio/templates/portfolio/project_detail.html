{% extends 'portfolio/base.html' %}
{% load static %} 

{% block title %}{{ project.title }} - Project Details{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'portfolio/css/project.css' %}">
{% endblock %}

{% block content %}
<article class="project-detail-page">
    <header>
        <h1 class="project-title">{{ project.title }}</h1>
        <p class="project-description">{{ project.description }}</p>
    </header>

    <!-- Folders and Files -->
    <section class="folders-section" aria-labelledby="folders-heading">
        <h2 id="folders-heading" class="section-heading">Folders and Files</h2>
        {% if project.folders.all %}
            <div class="folders-list">
                {% for folder in project.folders.all %}
                    <div class="folder">
                        <h3>{{ folder.name }}</h3>
                        <ul class="files-list">
                            {% for file in folder.files.all %}
                                <li>
                                    {% if file.is_private %}
                                        <strong>{{ file.name }}</strong> (Private)
                                    {% else %}
                                        <a href="{{ file.file.url }}" target="_blank" rel="noopener noreferrer">{{ file.name }}</a>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No folders or files available for this project.</p>
        {% endif %}
    </section>

    <!-- Reviews -->
    <section class="reviews-section" aria-labelledby="reviews-heading">
        <h2 id="reviews-heading" class="section-heading">Reviews</h2>
        {% if reviews %}
            <ul class="reviews-list">
                {% for review in reviews %}
                    <li class="review">
                        <p><strong>{{ review.reviewer_name }}:</strong> {{ review.content }}</p>
                        <p><small>Submitted on {{ review.created_at|date:"Y-m-d" }}</small></p>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No reviews available yet. Be the first to leave a review!</p>
        {% endif %}

        <p>
            <a href="{% url 'portfolio:project_review' project.id %}" class="btn-review">Leave a Review</a>
        </p>
    </section>

</article>
{% endblock %}
