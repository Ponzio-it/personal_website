<!-- portfolio/templates/portfolio/project_detail.html -->
{% extends 'portfolio/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{{ project.title }} - Project Details{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'portfolio/css/project_detail.css' %}">
{% endblock %}

{% block content %}
<article class="project-detail-page">
    <header>
        <h1 class="project-title">{{ project.title }}</h1>
        <p class="project-description">{{ project.description }}</p>
    </header>

    <!-- Folders and Files -->
    <section class="folders-section" aria-labelledby="folders-heading">
        <h2 id="folders-heading" class="section-heading">Folders and Files</h2>
        {% if folders %}
            <ul class="folders-list">
                {% for folder in folders %}
                    <li class="folder-item">
                        <h3 class="folder-name">
                            <a href="{% url 'portfolio:folder_detail' folder.id %}">{{ folder.name }}</a>
                        </h3>
                        {% if folder.files.all %}
                            <ul class="files-list">
                                {% for file in folder.files.all %}
                                    <li class="file-item">
                                        <a href="{{ file.file.url }}" target="_blank">{{ file.name }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>No files in this folder.</p>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No folders or files available for this project.</p>
        {% endif %}
    </section>

    <!-- Reviews -->
    <section class="reviews-section" aria-labelledby="reviews-heading">
        <h2 id="reviews-heading" class="section-heading">Reviews</h2>
        {% if reviews %}
            <ul class="reviews-list">
                {% for review in reviews %}
                    <li class="review-item">
                        <p class="review-content"><strong>{{ review.reviewer_name }}:</strong> {{ review.content }}</p>
                        <p class="review-date"><small>Submitted on {{ review.created_at|date:"F d, Y" }}</small></p>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No reviews available yet. Be the first to leave a review!</p>
        {% endif %}

        <p>
            <a href="{% url 'portfolio:project_review' project.id %}" class="btn btn-review">Leave a Review</a>
        </p>
    </section>
    <p><a href="{% url 'portfolio:projects'%}" class="back-link">Back to Projects</a></p>
</article>
{% endblock %}
